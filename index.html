<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Athena Dependency Graph</title>
  <style>
    html, body { margin: 0; height: 100%; }
    #cy { width: 100%; height: 100%; display: block; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape/dist/cytoscape.min.js"></script>
</head>
<body>
<div id="cy"></div>
<script>
fetch('packages_graph.json')
  .then(res => res.json())
  .then(data => {
    const cy = cytoscape({
      container: document.getElementById('cy'),
      elements: [
        ...data.nodes.map(n => ({ data: { id: n.id, label: n.label } })),
        ...data.edges.map(e => ({ data: { source: e.from, target: e.to } }))
      ],
      layout: { name: 'cose', animate: false },
      style: [
        { selector: 'node', style: { 'label': 'data(label)', 'font-size': 6 } },
        { selector: 'edge', style: { 'width': 0.5, 'line-color': '#888' } }
      ]
    });

    // Example: click to expand/collapse (needs actual clustering logic)
    cy.on('tap', 'node', function(evt){
      const node = evt.target;
      console.log('Clicked node', node.id());
      // Implement expand/collapse here
    });
  });
</script>
</body>
</html>
